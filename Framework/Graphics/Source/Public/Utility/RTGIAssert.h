//----------------------------------------------------------------------------
// Graphics framework for real-time GI study.
// Che Sun at Worcester Polytechnic Institute, Fall 2013.
//----------------------------------------------------------------------------

#ifndef RTGI_Assert_H
#define RTGI_Assert_H

#include <cassert>

#ifdef NDEBUG

//----------------------------------------------------------------------------
#define RTGI_ASSERT(ignore) \
((void)0)
//----------------------------------------------------------------------------

#else

//----------------------------------------------------------------------------
// Microsoft Windows 2000/XP platform
//----------------------------------------------------------------------------
#if defined(_WIN32)

#pragma warning(disable:4793)
//----------------------------------------------------------------------------
#define RTGI_SAFEBREAKPOINT \
try \
{ \
    _asm \
    { \
        int 3 \
    }; \
} \
catch(...) \
{ \
    ; \
}
//----------------------------------------------------------------------------

//----------------------------------------------------------------------------
// Macintosh OS X platform
//----------------------------------------------------------------------------
#elif defined(__APPLE__)

#define RTGI_SAFEBREAKPOINT ((void)0)

//----------------------------------------------------------------------------
// Linux platform
//----------------------------------------------------------------------------
#else

#define RTGI_SAFEBREAKPOINT ((void)0)

#endif

//----------------------------------------------------------------------------
#define RTGI_ASSERT(expr) \
if( !(expr) ) \
{ \
    RTGI_SAFEBREAKPOINT; \
    assert(expr); \
}
//----------------------------------------------------------------------------

#endif

#endif

